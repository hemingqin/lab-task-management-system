{"ast":null,"code":"import React,{useState}from'react';import{Container,Paper,Typography,Box,TextField,Button,Alert,Grid,Divider}from'@mui/material';import{useAuth}from'../contexts/AuthContext';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(){const{user,setUser}=useAuth();const[formData,setFormData]=useState({username:(user===null||user===void 0?void 0:user.username)||'',email:(user===null||user===void 0?void 0:user.email)||'',currentPassword:'',newPassword:'',confirmPassword:''});const[error,setError]=useState('');const[success,setSuccess]=useState('');const[loading,setLoading]=useState(false);const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleUpdateProfile=async e=>{e.preventDefault();setError('');setSuccess('');setLoading(true);try{const response=await axios.put('http://localhost:5000/api/auth/profile',{username:formData.username,email:formData.email});setUser(response.data);setSuccess('Profile updated successfully');}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Failed to update profile');}finally{setLoading(false);}};const handleChangePassword=async e=>{e.preventDefault();setError('');setSuccess('');if(formData.newPassword!==formData.confirmPassword){return setError('New passwords do not match');}setLoading(true);try{await axios.put('http://localhost:5000/api/auth/change-password',{current_password:formData.currentPassword,new_password:formData.newPassword});setSuccess('Password changed successfully');setFormData({...formData,currentPassword:'',newPassword:'',confirmPassword:''});}catch(err){var _err$response2,_err$response2$data;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||'Failed to change password');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(Container,{maxWidth:\"md\",children:/*#__PURE__*/_jsxs(Paper,{sx:{p:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Profile Settings\"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error}),success&&/*#__PURE__*/_jsx(Alert,{severity:\"success\",sx:{mb:2},children:success}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Account Information\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleUpdateProfile,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Username\",name:\"username\",value:formData.username,onChange:handleChange,margin:\"normal\",required:true}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Email\",name:\"email\",type:\"email\",value:formData.email,onChange:handleChange,margin:\"normal\",required:true}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",sx:{mt:2},disabled:loading,children:loading?'Updating...':'Update Profile'})]})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Divider,{sx:{my:2}})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Change Password\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleChangePassword,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Current Password\",name:\"currentPassword\",type:\"password\",value:formData.currentPassword,onChange:handleChange,margin:\"normal\",required:true}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"New Password\",name:\"newPassword\",type:\"password\",value:formData.newPassword,onChange:handleChange,margin:\"normal\",required:true}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Confirm New Password\",name:\"confirmPassword\",type:\"password\",value:formData.confirmPassword,onChange:handleChange,margin:\"normal\",required:true}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",sx:{mt:2},disabled:loading,children:loading?'Changing Password...':'Change Password'})]})]})]})]})});}export default Profile;","map":{"version":3,"names":["React","useState","Container","Paper","Typography","Box","TextField","Button","Alert","Grid","Divider","useAuth","axios","jsx","_jsx","jsxs","_jsxs","Profile","user","setUser","formData","setFormData","username","email","currentPassword","newPassword","confirmPassword","error","setError","success","setSuccess","loading","setLoading","handleChange","e","target","name","value","handleUpdateProfile","preventDefault","response","put","data","err","_err$response","_err$response$data","handleChangePassword","current_password","new_password","_err$response2","_err$response2$data","maxWidth","children","sx","p","variant","gutterBottom","severity","mb","container","spacing","item","xs","component","onSubmit","fullWidth","label","onChange","margin","required","type","mt","disabled","my","color"],"sources":["D:/git/Lab_team_task_management/frontend/src/pages/Profile.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport {\r\n  Container,\r\n  Paper,\r\n  Typography,\r\n  Box,\r\n  TextField,\r\n  Button,\r\n  Alert,\r\n  Grid,\r\n  Divider,\r\n} from '@mui/material';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport axios from 'axios';\r\n\r\nfunction Profile() {\r\n  const { user, setUser } = useAuth();\r\n  const [formData, setFormData] = useState({\r\n    username: user?.username || '',\r\n    email: user?.email || '',\r\n    currentPassword: '',\r\n    newPassword: '',\r\n    confirmPassword: '',\r\n  });\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleUpdateProfile = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setSuccess('');\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await axios.put('http://localhost:5000/api/auth/profile', {\r\n        username: formData.username,\r\n        email: formData.email,\r\n      });\r\n      setUser(response.data);\r\n      setSuccess('Profile updated successfully');\r\n    } catch (err) {\r\n      setError(err.response?.data?.error || 'Failed to update profile');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChangePassword = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setSuccess('');\r\n\r\n    if (formData.newPassword !== formData.confirmPassword) {\r\n      return setError('New passwords do not match');\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      await axios.put('http://localhost:5000/api/auth/change-password', {\r\n        current_password: formData.currentPassword,\r\n        new_password: formData.newPassword,\r\n      });\r\n      setSuccess('Password changed successfully');\r\n      setFormData({\r\n        ...formData,\r\n        currentPassword: '',\r\n        newPassword: '',\r\n        confirmPassword: '',\r\n      });\r\n    } catch (err) {\r\n      setError(err.response?.data?.error || 'Failed to change password');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"md\">\r\n      <Paper sx={{ p: 3 }}>\r\n        <Typography variant=\"h4\" gutterBottom>\r\n          Profile Settings\r\n        </Typography>\r\n\r\n        {error && (\r\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n            {error}\r\n          </Alert>\r\n        )}\r\n\r\n        {success && (\r\n          <Alert severity=\"success\" sx={{ mb: 2 }}>\r\n            {success}\r\n          </Alert>\r\n        )}\r\n\r\n        <Grid container spacing={3}>\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              Account Information\r\n            </Typography>\r\n            <Box component=\"form\" onSubmit={handleUpdateProfile}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Username\"\r\n                name=\"username\"\r\n                value={formData.username}\r\n                onChange={handleChange}\r\n                margin=\"normal\"\r\n                required\r\n              />\r\n              <TextField\r\n                fullWidth\r\n                label=\"Email\"\r\n                name=\"email\"\r\n                type=\"email\"\r\n                value={formData.email}\r\n                onChange={handleChange}\r\n                margin=\"normal\"\r\n                required\r\n              />\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"contained\"\r\n                sx={{ mt: 2 }}\r\n                disabled={loading}\r\n              >\r\n                {loading ? 'Updating...' : 'Update Profile'}\r\n              </Button>\r\n            </Box>\r\n          </Grid>\r\n\r\n          <Grid item xs={12}>\r\n            <Divider sx={{ my: 2 }} />\r\n          </Grid>\r\n\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              Change Password\r\n            </Typography>\r\n            <Box component=\"form\" onSubmit={handleChangePassword}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Current Password\"\r\n                name=\"currentPassword\"\r\n                type=\"password\"\r\n                value={formData.currentPassword}\r\n                onChange={handleChange}\r\n                margin=\"normal\"\r\n                required\r\n              />\r\n              <TextField\r\n                fullWidth\r\n                label=\"New Password\"\r\n                name=\"newPassword\"\r\n                type=\"password\"\r\n                value={formData.newPassword}\r\n                onChange={handleChange}\r\n                margin=\"normal\"\r\n                required\r\n              />\r\n              <TextField\r\n                fullWidth\r\n                label=\"Confirm New Password\"\r\n                name=\"confirmPassword\"\r\n                type=\"password\"\r\n                value={formData.confirmPassword}\r\n                onChange={handleChange}\r\n                margin=\"normal\"\r\n                required\r\n              />\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                sx={{ mt: 2 }}\r\n                disabled={loading}\r\n              >\r\n                {loading ? 'Changing Password...' : 'Change Password'}\r\n              </Button>\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Profile; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}